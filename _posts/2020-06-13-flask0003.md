---
layout: post
title: "Flask | Jinja2 模板引擎（二）"
subtitle: "控制结构和使用 Bootstrap 模板"
author: "Haauleon"
header-style: text
tags:
  - Flask
---

# 一、控制结构
&emsp;&emsp; Python 开发前后端不分离 Web 项目的时候，前端通常使用 Jinja2 模板语言。为了改变模板的渲染流程，需要用到 Jinja2 的控制结构。     

## 1.if 条件判断语句            
需求：用户从客户端发送请求并传入一串身份证号码，应用程序需要对这串身份证号码进行检验，并返回最终的检验结果。       

<br>

**方式一：在视图函数中进行检验**                           
在 /hello.py 中定义一个视图函数 checkIDCard(strNum) 。      

```python
from flask import Flask
import time
app = Flask(__name__)

@app.route('/user/check/<strNum>')
def checkIDCard(strNum):
    # 身份证号码长度判断
    if len(strNum) != 15 and len(strNum) != 18:
        return "填写的身份证号码长度不正确，请重新填写！"
    else:    
        if len(strNum) == 18:   
            # 判断身份证号码的日期是否有效
            strDate = strNum[6:14]
            try:
                time.strptime(strDate, "%Y%m%d")
            except ValueError:
                return "身份证号码验证失败，请重新填写！"

            # 排除长度为18的身份证号码的最后一位数字后进行字符串格式判断
            if strNum[:17].isnumeric() == False:
                return "填写的身份证号码格式不正确，请重新填写！"
            else:
                return "身份证号码验证成功！"
```       


实现效果如下：        

![](\img\in-post\2020-06-13-flask0003\1.png)        

![](\img\in-post\2020-06-13-flask0003\2.png)       

![](\img\in-post\2020-06-13-flask0003\3.png)      

![](\img\in-post\2020-06-13-flask0003\4.png)      

![](\img\in-post\2020-06-13-flask0003\5.png)      

![](\img\in-post\2020-06-13-flask0003\6.png)     

![](\img\in-post\2020-06-13-flask0003\7.png)


<br><br>



**方式二：在模板中进行检验**            
在 /hello.py 中定义一个视图函数 checkIDCard(strNum) 。      

```python
from flask import Flask, render_template
app = Flask(__name__)

@app.route('/user/check/<strNum>')
def checkIDCard(strNum):
    return render_template('check.html')
```


在 /templates/check.html 中验证用户的身份证号码，相当于前端做判断。           

![](\img\in-post\2020-06-13-flask0003\11.png)          

实现效果如下：        

![](\img\in-post\2020-06-13-flask0003\8.png)        

![](\img\in-post\2020-06-13-flask0003\9.png)       

![](\img\in-post\2020-06-13-flask0003\10.png) 

<br><br>


## 2.for 循环语句

<br><br>


## 3.重复使用宏

<br><br>


## 4.模板继承

<br><br>




# 二、集成 Bootstrap

## 使用 Flask-Bootstrap 基模板

<br><br>

## 自定义一个错误页面